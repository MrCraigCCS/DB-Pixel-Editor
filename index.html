<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kids Pixel Editor</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            overflow: hidden;
        }

        .container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            padding: 10px;
            max-width: 100vw;
            max-height: 100vh;
        }

        .toolbox {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 120px;
        }

        .tool-button {
            padding: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
            cursor: pointer;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            transition: all 0.2s;
            user-select: none;
        }

        .tool-button:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .tool-button.active {
            background: #4CAF50;
            color: white;
            border-color: #45a049;
        }

        .canvas-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .pixel-canvas {
            display: grid;
            grid-template-columns: repeat(20, 20px);
            grid-template-rows: repeat(20, 20px);
            gap: 1px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
        }

        .pixel {
            width: 20px;
            height: 20px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            cursor: crosshair;
            transition: all 0.1s;
        }

        .pixel:hover {
            transform: scale(1.1);
            z-index: 1;
            position: relative;
        }

        .color-palette {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            min-width: 200px;
            width: 160px;
        }

        .color-swatch {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            cursor: pointer;
            border: 2px solid #ddd;
            transition: all 0.2s;
        }

        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .color-swatch.active {
            border-color: #333;
            transform: scale(1.15);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
        }

        .title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="title">üé® Mr. Craig's Pixel Editor</div>
    
    <div class="container">
        <!-- Toolbox -->
        <div class="toolbox">
            <div class="tool-button active" data-tool="draw">
                ‚úèÔ∏è<br>Draw
            </div>
            <div class="tool-button" data-tool="erase">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXLmIAwiWURCEDRf95TpP3PH3psRlzxQN9JQ&s" alt="Pink eraser" style="width: 24px; height: 24px;" onerror="this.src=''; this.alt='Eraser icon failed to load'; this.style.display='none';"><br>Erase
            </div>
            <div class="tool-button" data-tool="fill">
                ü™£<br>Fill
            </div>
            <div class="tool-button" data-tool="clear">
                üóëÔ∏è<br>Clear
            </div>
        </div>

        <!-- Canvas -->
        <div class="canvas-container">
            <div class="pixel-canvas" id="canvas"></div>
        </div>

        <!-- Color Palette -->
        <div class="color-palette" id="palette"></div>
    </div>

    <script>
        // Initialize variables
        let currentTool = 'draw';
        let currentColor = '#FF0000';
        let isDrawing = false;

        // Color palette - 44 colors organized by hue and shade
        const colors = [
            // Reds
            '#FF0000', '#FF6B6B', '#DC143C', '#8B0000',
            // Oranges
            '#FFA500', '#FF8C00', '#FF4500', '#D2691E',
            // Yellows
            '#FFFF00', '#FFD700', '#FFFF99', '#DAA520',
            // Greens
            '#00FF00', '#32CD32', '#228B22', '#006400',
            // Blues
            '#0000FF', '#4169E1', '#1E90FF', '#000080',
            // Purples
            '#800080', '#9932CC', '#8A2BE2', '#4B0082',
            // Pinks
            '#FF69B4', '#FFB6C1', '#FF1493', '#C71585',
            // Neutrals
            '#000000', '#808080', '#C0C0C0', '#FFFFFF',
            // Light Reds & Corals
            '#FFB3BA', '#FF7F7F', '#CD5C5C', '#A0522D',
            // Peach & Light Orange
            '#FFDFBA', '#FFDAB9', '#F4A460', '#CD853F',
            // Light Yellows & Cream
            '#FFFFBA', '#F0E68C', '#BDB76B', '#9ACD32'
        ];

        // Create canvas pixels
        function createCanvas() {
            const canvas = document.getElementById('canvas');
            for (let i = 0; i < 400; i++) { // 20x20 = 400 pixels
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.dataset.index = i;
                canvas.appendChild(pixel);
            }
        }

        // Create color palette
        function createPalette() {
            const palette = document.getElementById('palette');
            colors.forEach((color, index) => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = color;
                swatch.dataset.color = color;
                if (index === 0) swatch.classList.add('active');
                palette.appendChild(swatch);
            });
        }

        // Flood fill algorithm
        function floodFill(startIndex, targetColor, fillColor) {
            if (targetColor === fillColor) return;
            
            const pixels = document.querySelectorAll('.pixel');
            const visited = new Set();
            const stack = [startIndex];
            
            while (stack.length > 0) {
                const index = stack.pop();
                if (visited.has(index)) continue;
                
                const pixel = pixels[index];
                const pixelColor = pixel.style.backgroundColor || 'rgb(255, 255, 255)';
                
                if (pixelColor !== targetColor) continue;
                
                visited.add(index);
                pixel.style.backgroundColor = fillColor;
                
                // Add adjacent pixels
                const row = Math.floor(index / 20);
                const col = index % 20;
                
                // Up
                if (row > 0) stack.push(index - 20);
                // Down
                if (row < 19) stack.push(index + 20);
                // Left
                if (col > 0) stack.push(index - 1);
                // Right
                if (col < 19) stack.push(index + 1);
            }
        }

        // Convert hex to rgb for comparison
        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgb(${r}, ${g}, ${b})`;
        }

        // Handle pixel interactions
        function handlePixelClick(e) {
            const pixel = e.target;
            const index = parseInt(pixel.dataset.index);
            
            if (currentTool === 'draw') {
                pixel.style.backgroundColor = currentColor;
            } else if (currentTool === 'erase') {
                pixel.style.backgroundColor = 'white';
            } else if (currentTool === 'fill') {
                const targetColor = pixel.style.backgroundColor || 'rgb(255, 255, 255)';
                const fillColor = hexToRgb(currentColor);
                floodFill(index, targetColor, fillColor);
            }
        }

        function handlePixelMouseOver(e) {
            if (isDrawing && currentTool === 'draw') {
                e.target.style.backgroundColor = currentColor;
            } else if (isDrawing && currentTool === 'erase') {
                e.target.style.backgroundColor = 'white';
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            createCanvas();
            createPalette();
            
            // Tool selection
            document.querySelectorAll('.tool-button').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.dataset.tool === 'clear') {
                        // Clear all pixels
                        document.querySelectorAll('.pixel').forEach(pixel => {
                            pixel.style.backgroundColor = 'white';
                        });
                        return;
                    }
                    
                    document.querySelectorAll('.tool-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentTool = this.dataset.tool;
                });
            });
            
            // Color selection
            document.querySelectorAll('.color-swatch').forEach(swatch => {
                swatch.addEventListener('click', function() {
                    document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                    currentColor = this.dataset.color;
                });
            });
            
            // Canvas interactions
            document.getElementById('canvas').addEventListener('mousedown', function(e) {
                if (e.target.classList.contains('pixel')) {
                    isDrawing = true;
                    handlePixelClick(e);
                }
            });
            
            document.getElementById('canvas').addEventListener('mouseover', function(e) {
                if (e.target.classList.contains('pixel')) {
                    handlePixelMouseOver(e);
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDrawing = false;
            });
            
            // Prevent context menu on right click
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98760f2654e67577',t:'MTc1OTI1OTgzMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
